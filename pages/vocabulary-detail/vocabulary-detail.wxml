<view class="vocabulary-page">
  <!-- 标签栏 (仅在非收藏页显示) -->
  <scroll-view wx:if="{{!isFavoritePage}}" class="tabs-scroll" scroll-x="true" enable-flex="true">
    <view class="tabs-container">
      <view 
        wx:for="{{tabs}}" 
        wx:key="id"
        class="tab-item {{currentTab === item.id ? 'active' : ''}}"
        bindtap="onTabChange"
        data-tab="{{item.id}}"
      >
        <text class="tab-text">{{item.name}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- 词汇总数 -->
  <view class="total-count {{isFavoritePage ? 'favorite-header' : ''}}">
    <text class="count-text">{{totalWords}}个生词</text>
  </view>

  <!-- 词汇列表 -->
  <scroll-view class="words-scroll" scroll-y="true" bindscrolltolower="onReachBottom">
    <view class="words-container">
      <block wx:if="{{isLoading && words.length === 0}}">
        <view class="loading">
          <text>加载中...</text>
        </view>
      </block>

      <block wx:elif="{{words.length > 0}}">
        <block wx:for="{{words}}" wx:key="word">
          <view 
            class="word-item {{isFavoritePage ? 'favorite-item' : ''}}" 
            bindtap="viewWordDetail" 
            data-word="{{item.word}}"
          >
            <!-- 收藏页布局 -->
            <block wx:if="{{isFavoritePage}}">
              <view class="fav-word-header">
                <view class="fav-word-main">
                  <text class="fav-word-text">{{item.word}}</text>
                  <image class="fav-sound-icon" src="/images/sound.png" catchtap="playWord" data-word="{{item.word}}"></image>
                </view>
                <text class="fav-date">{{item.create_time || '2025-12-24'}}</text>
              </view>
              <view class="fav-meaning-row">
                <text class="fav-word-meaning">{{item.meaning}}</text>
                <text class="fav-arrow">›</text>
              </view>
            </block>

            <!-- 普通页布局 -->
            <block wx:else>
              <view class="word-header">
                <text class="word-text">{{item.word}}</text>
                <view class="word-frequency">
                  <text class="frequency-text">({{item.frequency}})</text>
                </view>
              </view>
              <view class="word-actions">
                <button class="sound-button" catchtap="playWord" data-word="{{item.word}}">
                  <image src="/images/sound.png" mode="aspectFit"></image>
                </button>
                <text class="arrow-right">›</text>
              </view>
              <text class="word-meaning">{{item.meaning}}</text>
            </block>
          </view>
        </block>
      </block>

      <block wx:elif="{{!isLoading}}">
        <view class="empty">
          <text>暂无词汇</text>
        </view>
      </block>
    </view>
  </scroll-view>
</view>
